(self.webpackChunkfantascivolizia=self.webpackChunkfantascivolizia||[]).push([[4288],{4288:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RenewalPageModule:()=>P});var a=n(1116),l=n(1462),i=n(4812),c=n(9199),o=n(2797),s=n(3070),r=n(767),u=n(9550),d=n(994),h=n(5713),m=n(8378),g=n(7368),f=n(9637),p=n(6343),Z=n(8735);function T(e,t){if(1&e&&(g.TgZ(0,"ion-select-option",19),g.TgZ(1,"b"),g._uU(2),g.qZA(),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.teamId),g.xp6(2),g.Oqu(e.name)}}function x(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"th",20),g.TgZ(1,"mat-checkbox",21),g.NdJ("change",function(t){g.CHM(e);const n=g.oxw();return t?n.masterToggle():null}),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function w(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"td",22),g.TgZ(1,"mat-checkbox",23),g.NdJ("click",function(e){return e.stopPropagation()})("change",function(t){const n=g.CHM(e).$implicit,a=g.oxw();return t?a.toggleSelect(n):null}),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,n=g.oxw();g.xp6(1),g.Q6J("checked",n.selection.isSelected(e))}}function A(e,t){1&e&&(g.TgZ(0,"th",24),g._uU(1,"R"),g.qZA())}const C=function(e){return{"background-color":e}};function y(e,t){if(1&e&&(g.TgZ(0,"td",22),g.TgZ(1,"b",25),g._uU(2),g.qZA(),g.qZA()),2&e){const e=t.$implicit,n=g.oxw();g.xp6(1),g.Q6J("ngStyle",g.VKq(2,C,n.computeRoleColor(e.role))),g.xp6(1),g.Oqu(e.role)}}function q(e,t){1&e&&(g.TgZ(0,"th",20),g._uU(1,"Nome"),g.qZA())}function I(e,t){if(1&e&&(g.TgZ(0,"td",22),g._uU(1),g.ALo(2,"formatName"),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(g.lcZ(2,1,e.name))}}function N(e,t){1&e&&(g.TgZ(0,"th",26),g._uU(1,"Q"),g.qZA())}function O(e,t){if(1&e&&(g.TgZ(0,"td",27),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.hij(" ",e.quot," ")}}function R(e,t){1&e&&(g.TgZ(0,"th",26),g._uU(1,"Val"),g.qZA())}function k(e,t){if(1&e&&(g.TgZ(0,"td",27),g._uU(1),g.ALo(2,"currency"),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.hij(" ",g.xi3(2,1,e.value,"EUR")," ")}}function D(e,t){1&e&&(g.TgZ(0,"th",26),g._uU(1,"Rinn %"),g.qZA())}function L(e,t){if(1&e&&(g.TgZ(0,"td",27),g._uU(1),g.ALo(2,"round"),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.hij(" ",g.lcZ(2,1,100*e.nextContractRenewal)," % ")}}function b(e,t){1&e&&(g.TgZ(0,"th",26),g._uU(1,"Rinn"),g.qZA())}function Q(e,t){if(1&e&&(g.TgZ(0,"td",27),g._uU(1),g.ALo(2,"currency"),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.hij(" ",g.xi3(2,1,e.nextPaymentValue,"EUR")," ")}}function S(e,t){1&e&&g._UZ(0,"tr",28)}function _(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",29),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().toggleSelect(t)}),g.qZA()}}const v=[{path:"",component:(()=>{class e{constructor(e){this.dataLoader=e,this.players=[],this.displayedColumns=["select","role","name","quot","value","nextContractRenewal","nextPaymentValue"],this.initialSelection=[],this.allowMultiSelect=!0,this.selection=new m.Ov(this.allowMultiSelect,this.initialSelection),this.finalRenewal=0}ngOnInit(){this.teams=this.dataLoader.getTeams(),this.teamId=this.dataLoader.teamId,this.players=[...this.dataLoader.getTeam(this.teamId).players].concat(this.dataLoader.getTeam(this.teamId).borrowed,this.dataLoader.getTeam(this.teamId).youth).filter(e=>"TITOLO DEFINITIVO"===e.contractType||"PRESTITO (OBBLIGO)"===e.contractType),this.dataLoader.$teamId.subscribe(e=>{this.finalRenewal=0,this.selection.clear(),this.teamId=e,this.players=[...this.dataLoader.getTeam(this.teamId).players].concat(this.dataLoader.getTeam(this.teamId).borrowed,this.dataLoader.getTeam(this.teamId).youth).filter(e=>"TITOLO DEFINITIVO"===e.contractType||"PRESTITO (OBBLIGO)"===e.contractType)})}changeTeam(e){this.dataLoader.$teamId.next(e.detail.value)}computeRoleColor(e){switch(e){case"P":return"#F8AB29";case"D":return"#63C623";case"C":return"#2E6BE6";case"A":return"#F21A3C"}}isAllSelected(){return this.selection.selected.length==this.players.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.players.forEach(e=>this.selection.select(e)),this.finalRenewal=0,this.selection.selected.forEach(e=>{this.finalRenewal+=e.nextPaymentValue})}toggleSelect(e){this.selection.toggle(e),this.finalRenewal=0,this.selection.selected.forEach(e=>{this.finalRenewal+=e.nextPaymentValue})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(f.W))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-renewal"]],decls:34,vars:11,consts:[[3,"translucent"],["required","",2,"width","100%","font-weight","bold","font-size","larger",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fullscreen"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["style","text-align: center","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","quot"],["class","align-right","mat-header-cell","",4,"matHeaderCellDef"],["class","align-right","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","nextContractRenewal"],["matColumnDef","nextPaymentValue"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell","",2,"text-align","center"],[1,"role",3,"ngStyle"],["mat-header-cell","",1,"align-right"],["mat-cell","",1,"align-right"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-select",1),g.NdJ("ionChange",function(e){return t.changeTeam(e)}),g.YNc(3,T,3,2,"ion-select-option",2),g.qZA(),g.qZA(),g.qZA(),g.TgZ(4,"ion-content",3),g.TgZ(5,"table",4),g.ynx(6,5),g.YNc(7,x,2,2,"th",6),g.YNc(8,w,2,1,"td",7),g.BQk(),g.ynx(9,8),g.YNc(10,A,2,0,"th",9),g.YNc(11,y,3,4,"td",7),g.BQk(),g.ynx(12,10),g.YNc(13,q,2,0,"th",6),g.YNc(14,I,3,3,"td",7),g.BQk(),g.ynx(15,11),g.YNc(16,N,2,0,"th",12),g.YNc(17,O,2,1,"td",13),g.BQk(),g.ynx(18,14),g.YNc(19,R,2,0,"th",12),g.YNc(20,k,3,4,"td",13),g.BQk(),g.ynx(21,15),g.YNc(22,D,2,0,"th",12),g.YNc(23,L,3,3,"td",13),g.BQk(),g.ynx(24,16),g.YNc(25,b,2,0,"th",12),g.YNc(26,Q,3,4,"td",13),g.BQk(),g.YNc(27,S,1,0,"tr",17),g.YNc(28,_,1,0,"tr",18),g.qZA(),g.qZA(),g.TgZ(29,"ion-footer"),g.TgZ(30,"ion-toolbar"),g.TgZ(31,"ion-title"),g._uU(32),g.ALo(33,"currency"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("translucent",!0),g.xp6(2),g.s9C("value",t.teamId),g.xp6(1),g.Q6J("ngForOf",t.teams),g.xp6(1),g.Q6J("fullscreen",!0),g.xp6(1),g.Q6J("dataSource",t.players),g.xp6(22),g.Q6J("matHeaderRowDef",t.displayedColumns),g.xp6(1),g.Q6J("matRowDefColumns",t.displayedColumns),g.xp6(4),g.Oqu(g.xi3(33,8,t.finalRenewal,"EUR")))},directives:[i.Gu,i.sr,i.t9,i.QI,a.sg,i.W2,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,i.fr,i.wd,i.n0,c.ge,d.oG,c.ev,a.PC,c.XQ,c.Gk],pipes:[a.H9,p.c,Z.L],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:5px 9px}table[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[h.Bz.forChild(v)],h.Bz]}),e})();var U=n(5425);const Y=[c.p0,o.QW,s.lN,r.LD,u.c,d.p9];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.ez,l.u5,i.Pc,...Y,B,U.m]]}),e})()}}]);