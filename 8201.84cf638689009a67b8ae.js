(self.webpackChunkfantascivolizia=self.webpackChunkfantascivolizia||[]).push([[8201],{8201:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PlayerPageModule:()=>U});var o=n(1116),a=n(1462),i=n(4812),l=n(3070),r=n(767),u=n(9550),s=n(7173),g=n(4369),c=n(5713);class p{constructor(t,e){this.events=t,this.reward=e}}class f{constructor(t,e,n,o,a,i,l,r,u,s,g,c){this.value=t,this.quot=e,this.contractType=n,this.contractLength=o,this.bonusList=a,this.repaid=i,this.repaidValue=l,this.finalQuot=r,this.finalValue=u,this.id=s,this.name=g,this.role=c}}var d=n(7368),Z=n(4099),m=n(9637),h=n(7064),T=n(6343);function q(t,e){if(1&t&&(d.TgZ(0,"ion-select-option",3),d.TgZ(1,"b"),d._uU(2),d.qZA(),d.TgZ(3,"b"),d._uU(4),d.qZA(),d.TgZ(5,"b"),d._uU(6),d.ALo(7,"formatName"),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.s9C("value",t.playerId),d.xp6(2),d.Oqu(t.role),d.xp6(2),d.hij("",t.role?" -":""," "),d.xp6(2),d.Oqu(d.lcZ(7,4,t.name))}}function A(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"Durata"),d.qZA(),d.TgZ(3,"mat-select",8),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).contractLength=e}),d.TgZ(4,"mat-option",18),d._uU(5,"12"),d.qZA(),d.TgZ(6,"mat-option",19),d._uU(7,"9"),d.qZA(),d.TgZ(8,"mat-option",20),d._uU(9,"6"),d.qZA(),d.TgZ(10,"mat-option",21),d._uU(11,"3"),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.contractLength)}}function b(t,e){1&t&&(d.TgZ(0,"mat-option",24),d._uU(1,"No"),d.qZA())}function v(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"Riscatto"),d.qZA(),d.TgZ(3,"mat-select",8),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).repaid=e}),d.TgZ(4,"mat-option",22),d._uU(5,"S\xec"),d.qZA(),d.YNc(6,b,2,0,"mat-option",23),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.repaid),d.xp6(3),d.Q6J("ngIf","lendR"==t.contractType)}}function x(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"Cifra Riscatto"),d.qZA(),d.TgZ(3,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).repaidValue=e}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.repaidValue)}}function M(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"No. Eventi Bonus 1"),d.qZA(),d.TgZ(3,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).bonus1Number=e}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.bonus1Number)}}function w(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"Ricompensa Bonus 1"),d.qZA(),d.TgZ(3,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).bonus1Reward=e}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.bonus1Reward)}}function N(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"No. Eventi Bonus 2"),d.qZA(),d.TgZ(3,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).bonus2Number=e}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.bonus2Number)}}function J(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-form-field",7),d.TgZ(1,"mat-label"),d._uU(2,"Ricompensa Bonus 2"),d.qZA(),d.TgZ(3,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw(2).bonus2Reward=e}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(3),d.Q6J("ngModel",t.bonus2Reward)}}function C(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"mat-form-field",5),d.TgZ(2,"mat-label"),d._uU(3,"Valore"),d.qZA(),d.TgZ(4,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().value=e}),d.qZA(),d.qZA(),d.TgZ(5,"mat-form-field",7),d.TgZ(6,"mat-label"),d._uU(7,"Quotazione iniziale"),d.qZA(),d.TgZ(8,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().quot=e}),d.qZA(),d.qZA(),d.TgZ(9,"mat-form-field",7),d.TgZ(10,"mat-label"),d._uU(11,"Quotazione finale"),d.qZA(),d.TgZ(12,"input",6),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().finalQuot=e}),d.qZA(),d.qZA(),d.TgZ(13,"mat-form-field",7),d.TgZ(14,"mat-label"),d._uU(15,"Contratto"),d.qZA(),d.TgZ(16,"mat-select",8),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().contractType=e}),d.TgZ(17,"mat-option",9),d._uU(18,"Definitivo"),d.qZA(),d.TgZ(19,"mat-option",10),d._uU(20,"Prestito"),d.qZA(),d.TgZ(21,"mat-option",11),d._uU(22,"Prestito (obbligo)"),d.qZA(),d.TgZ(23,"mat-option",12),d._uU(24,"Prestito (diritto)"),d.qZA(),d.qZA(),d.qZA(),d.YNc(25,A,12,1,"mat-form-field",13),d.YNc(26,v,7,2,"mat-form-field",13),d.YNc(27,x,4,1,"mat-form-field",13),d.TgZ(28,"mat-form-field",5),d.TgZ(29,"mat-label"),d._uU(30,"Bonus"),d.qZA(),d.TgZ(31,"mat-select",8),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().bonus=e}),d.TgZ(32,"mat-option",14),d._uU(33,"0"),d.qZA(),d.TgZ(34,"mat-option",15),d._uU(35,"1"),d.qZA(),d.TgZ(36,"mat-option",16),d._uU(37,"2"),d.qZA(),d.qZA(),d.qZA(),d.YNc(38,M,4,1,"mat-form-field",13),d.YNc(39,w,4,1,"mat-form-field",13),d.YNc(40,N,4,1,"mat-form-field",13),d.YNc(41,J,4,1,"mat-form-field",13),d.TgZ(42,"ion-row"),d.TgZ(43,"ion-button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().save()}),d._uU(44,"Salva"),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(4),d.Q6J("ngModel",t.value),d.xp6(4),d.Q6J("ngModel",t.quot),d.xp6(4),d.Q6J("ngModel",t.finalQuot),d.xp6(4),d.Q6J("ngModel",t.contractType),d.xp6(9),d.Q6J("ngIf","def"!=t.contractType),d.xp6(1),d.Q6J("ngIf","lendR"==t.contractType||"lendO"==t.contractType),d.xp6(1),d.Q6J("ngIf","lendR"==t.contractType||"lendO"==t.contractType),d.xp6(4),d.Q6J("ngModel",t.bonus),d.xp6(7),d.Q6J("ngIf","0"!=t.bonus),d.xp6(1),d.Q6J("ngIf","0"!=t.bonus),d.xp6(1),d.Q6J("ngIf","2"==t.bonus),d.xp6(1),d.Q6J("ngIf","2"==t.bonus)}}const y=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.route=t,this.router=e,this.service=n,this.dataLoader=o,this.formFlag=!1}ngOnInit(){this.bonus="0",this.contractType="def",this.repaid="no",this.id=this.route.snapshot.paramMap.get("id");const t=+this.route.snapshot.paramMap.get("teamId");this.players=[...this.dataLoader.getTeam(t).players].concat(this.dataLoader.getTeam(t).borrowed,this.dataLoader.getTeam(t).youth).sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0)}changePlayer(t){let e=this.players.filter(e=>e.playerId.toString()===t.detail.value);this.formFlag=!0,this.value=e[0].value.toString(),this.quot=e[0].quot.toString(),this.finalQuot=e[0].quot.toString(),this.playerName=e[0].name,this.role=e[0].role}save(){let t=[];"1"===this.bonus?t.push(new p(+this.bonus1Number.replace(/,/g,"."),+this.bonus1Reward.replace(/,/g,"."))):"2"===this.bonus&&(t.push(new p(+this.bonus1Number.replace(/,/g,"."),+this.bonus1Reward.replace(/,/g,"."))),t.push(new p(+this.bonus2Number.replace(/,/g,"."),+this.bonus2Reward.replace(/,/g,".")))),this.service.save(+this.id,new f(+this.value.replace(/,/g,"."),+this.quot,this.contractType,this.contractLength,t,this.repaid,this.repaidValue?+this.repaidValue.replace(/,/g,"."):null,this.finalQuot?+this.finalQuot:+this.quot,+this.value.replace(/,/g,"."),null,this.playerName?this.playerName:"GIOCATORE",this.role)),this.router.navigate(["/tool-exchange"])}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(c.gz),d.Y36(c.F0),d.Y36(Z.o),d.Y36(m.W))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-player"]],decls:9,vars:2,consts:[["placeholder","Seleziona Giocatore",2,"width","100%","font-weight","bold","font-size","larger","margin-bottom","2em",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["class","player",4,"ngIf"],[3,"value"],[1,"player"],["appearance","fill",2,"display","block","margin","auto"],["matInput","",3,"ngModel","ngModelChange"],["appearance","fill"],[3,"ngModel","ngModelChange"],["value","def"],["value","lend"],["value","lendO"],["value","lendR"],["appearance","fill",4,"ngIf"],["value","0"],["value","1"],["value","2"],[3,"click"],["value","12"],["value","9"],["value","6"],["value","3"],["value","yes"],["value","no",4,"ngIf"],["value","no"]],template:function(t,e){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-title"),d._uU(3,"Aggiungi giocatore"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(4,"ion-content"),d.TgZ(5,"ion-card"),d.TgZ(6,"ion-select",0),d.NdJ("ionChange",function(t){return e.changePlayer(t)}),d.YNc(7,q,8,6,"ion-select-option",1),d.qZA(),d.YNc(8,C,45,12,"div",2),d.qZA(),d.qZA()),2&t&&(d.xp6(7),d.Q6J("ngForOf",e.players),d.xp6(1),d.Q6J("ngIf",e.formFlag))},directives:[i.Gu,i.sr,i.wd,i.W2,i.PM,i.t9,i.QI,o.sg,o.O5,i.n0,l.KE,l.hX,u.Nt,a.Fj,a.JJ,a.On,r.gD,h.ey,i.Nd,i.YG],pipes:[T.c],styles:["ion-card[_ngcontent-%COMP%]{background-color:#424242;color:#fff;padding:1em 0;min-height:100%;min-height:-webkit-fill-available;min-height:fill-available}ion-button[_ngcontent-%COMP%]{margin:1em auto}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),t})();var Q=n(5425);let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.ez,a.u5,i.Pc,_,l.lN,r.LD,u.c,s.Nh,g.ot,Q.m]]}),t})()}}]);